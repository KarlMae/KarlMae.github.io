(this["webpackJsonpburger-venue"]=this["webpackJsonpburger-venue"]||[]).push([[0],{28:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(9),s=n.n(c),i=(n(28),n(29),n(3)),o=n.n(i),u=n(23),l=n(6),d=n(10),j=(n(31),{tartuBusStationCoordinates:{lat:58.3780494,lng:26.7321094},tartuCoordinates:{lat:58.3730018,lng:26.7125123}}),f=function(e,t,n){var r=4e4/360,a=Math.cos(Math.PI*t.lat/180)*r,c=Math.abs(t.lng-e.lng)*a,s=Math.abs(t.lat-e.lat)*r;return Math.sqrt(c*c+s*s)>=n},v=(n(32),n(8)),h=(n(33),n(0));var b=function(e){var t=e.header,n=e.text;return Object(h.jsxs)("div",{className:"info-window",children:[Object(h.jsx)("h3",{className:"info-window__header",children:t}),Object(h.jsx)("p",{className:"info-window__text",children:n})]})};var p=Object(v.GoogleApiWrapper)({apiKey:"AIzaSyAdP5Yi4SHAFqk1eW6vlinCaVWRgdsQeDw"})((function(e){var t=e.google,n=e.venues,r=e.selectedVenue,a=e.selectVenue;return Object(h.jsxs)(v.Map,{containerStyle:{position:"relative",width:"100%",height:"100%"},google:t,initialCenter:j.tartuCoordinates,zoom:12,className:"map",children:[Object(h.jsx)(v.Circle,{center:j.tartuBusStationCoordinates,radius:1e3}),n.map((function(e){return Object(h.jsx)(v.Marker,{position:{lat:e.location.lat,lng:e.location.lng},onClick:function(){return a(e.id)}},e.id)})),Object(h.jsx)(v.InfoWindow,{visible:!0,position:null===r||void 0===r?void 0:r.location,onClose:function(){return a(void 0)},children:Object(h.jsx)(b,{header:null===r||void 0===r?void 0:r.name,text:null===r||void 0===r?void 0:r.location.address})})]})}));n(53),n(54),n(55);var x=function(){return Object(h.jsxs)("div",{className:"lds-ellipsis",children:[Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{})]})};var O=function(e){var t=e.selectedVenue,n=e.venueImages,r=e.selectVenue,a=e.isLoading;return Object(h.jsxs)("div",{className:"gallery",children:[a&&Object(h.jsx)(x,{}),!a&&Object(h.jsx)("div",{className:"gallery__grid",children:n.sort((function(e,n){return t?e.venueId===t.id?-1:1:0})).map((function(e){return Object(h.jsx)("div",{onClick:function(){return r(e.venueId)},style:{background:"url(".concat(e.path,") center/cover")},className:"\n                            ".concat((null===t||void 0===t?void 0:t.id)===e.venueId&&"gallery__image--selected"," \n                            gallery__image fade-in\n                        ")},e.venueId)}))})]})},g=n(7),m=n.n(g);m.a.interceptors.request.use((function(e){return e.url="".concat(e.url,"&client_id=").concat("X4U5WCPYGMQUW4U5Z3N4IQXQR1P4IIPUG5RBXEZSENFQY5Z3","&client_secret=").concat("RCTOSXPSP1IUO3JEK2JRVLNEUGOPZNKLLF2ETNCDH24MZ0DJ"),e}),(function(e){return Promise.reject(e)})),m.a.interceptors.request.use((function(e){return e.url="".concat(e.url,"&v=20200303"),e}),(function(e){return Promise.reject(e)}));var N="https://api.foursquare.com",_={fetchBurgerVenues:function(){var e=Object(l.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(N,"/v2/venues/search?ll=58.3730018,26.7125123&categoryId=4bf58dd8d48988d16c941735"));case 2:return t=e.sent,e.abrupt("return",t.data.response.venues);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),fetchVenuePhotos:function(){var e=Object(l.a)(o.a.mark((function e(t){var n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("".concat(N,"/v2/venues/").concat(t,"/photos?"));case 2:return n=e.sent,e.abrupt("return",n.data.response.photos.items);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};n(73),n(74);var w=function(e){var t=e.className;return Object(h.jsxs)("div",{className:"loader ".concat(t),children:[Object(h.jsx)("p",{className:"loader__text",children:"Gathering data"}),Object(h.jsx)("span",{className:"loader__dot",children:"."}),Object(h.jsx)("span",{className:"loader__dot",children:"."}),Object(h.jsx)("span",{className:"loader__dot",children:"."})]})};var C=function(e){var t=e.isLoading;return Object(h.jsxs)("div",{className:"header",children:[Object(h.jsx)("h3",{className:"header__title",children:"Venues"}),t&&Object(h.jsx)(w,{className:"header__loading-notification"})]})};var I=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)([]),s=Object(d.a)(c,2),i=s[0],v=s[1],b=Object(r.useState)(void 0),x=Object(d.a)(b,2),g=x[0],m=x[1],N=Object(r.useState)(!0),w=Object(d.a)(N,2),I=w[0],S=w[1];Object(r.useEffect)((function(){var e=function(){var e=Object(l.a)(o.a.mark((function e(t){var n,r,a,c,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],r=Object(u.a)(t),e.prev=2,r.s();case 4:if((a=r.n()).done){e.next=12;break}return c=a.value,e.next=8,_.fetchVenuePhotos(c.id);case 8:(s=e.sent).length&&(i=s[0],n.push({venueId:c.id,path:i.prefix+"500x500"+i.suffix}));case 10:e.next=4;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(2),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:v(n);case 21:case"end":return e.stop()}}),e,null,[[2,14,17,20]])})));return function(t){return e.apply(this,arguments)}}();(function(){var t=Object(l.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,_.fetchBurgerVenues();case 2:return n=(n=t.sent).filter((function(e){return f(e.location,j.tartuBusStationCoordinates,1)})),a(n),t.next=7,e(n);case 7:S(!1);case 8:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[]);var V=function(e){window.scrollTo({top:0,left:0,behavior:"smooth"}),m(n.find((function(t){return t.id===e})))};return Object(h.jsxs)("div",{className:"front-page",children:[Object(h.jsx)(C,{isLoading:I}),Object(h.jsx)(p,{venues:n,selectedVenue:g,selectVenue:V}),Object(h.jsx)(O,{venueImages:i,selectedVenue:g,selectVenue:V,isLoading:I})]})};var S=function(){return Object(h.jsx)("div",{className:"application",children:Object(h.jsx)(I,{})})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),r(e),a(e),c(e),s(e)}))};n(75).config(),s.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(S,{})}),document.getElementById("root")),V()}},[[78,1,2]]]);
//# sourceMappingURL=main.0b2fdbe1.chunk.js.map